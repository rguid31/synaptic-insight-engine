<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Synaptic Insight Engine</title>
    <style>
        :root {
            --primary-glow: rgba(0, 255, 136, 0.5);
            --secondary-glow: rgba(0, 255, 255, 0.5);
            --tertiary-glow: rgba(100, 100, 255, 0.3);
            --background-dark: #0a0a0a;
            --component-bg: rgba(20, 20, 30, 0.9);
            --text-primary: #e0e0e0;
            --text-secondary: #888;
            --accent-green: #00ff88;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--background-dark);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        .neural-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            opacity: 0.15;
            background: 
                radial-gradient(circle at 20% 50%, #00ff8840 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, #ff00ff40 0%, transparent 50%),
                radial-gradient(circle at 40% 20%, #00ffff40 0%, transparent 50%);
            animation: pulse 10s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.15; }
            50% { opacity: 0.25; }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        header {
            background: linear-gradient(135deg, rgba(20, 20, 30, 0.95), rgba(30, 20, 40, 0.95));
            border: 1px solid var(--tertiary-glow);
            border-radius: 25px;
            padding: 40px;
            margin-bottom: 30px;
            backdrop-filter: blur(20px);
            box-shadow: 
                0 0 40px rgba(100, 100, 255, 0.2),
                inset 0 0 20px rgba(100, 100, 255, 0.1);
            position: relative;
            overflow: hidden;
            text-align: center; /* Centered header content */
        }

        header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(100, 100, 255, 0.1) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #00ff88, #00ffff, #ff00ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            position: relative;
            z-index: 1;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 1.1em;
            position: relative;
            z-index: 1;
        }

        .input-section {
            background: var(--component-bg);
            border: 1px solid var(--tertiary-glow);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        
        .url-input-container {
            margin-bottom: 25px;
        }

        .url-input {
            width: 100%;
            padding: 15px 20px;
            background: rgba(10, 10, 20, 0.8);
            border: 2px solid rgba(100, 100, 255, 0.2);
            border-radius: 15px;
            color: var(--text-primary);
            font-size: 1.1em;
            transition: all 0.3s ease;
        }

        .url-input:focus {
            outline: none;
            border-color: var(--accent-green);
            box-shadow: 0 0 20px var(--primary-glow);
        }

        .features-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 25px;
        }
        
        .feature-box h3 {
            font-size: 1.1em;
            color: var(--accent-green);
            margin-bottom: 10px;
        }

        .feature-box ul {
            list-style: none;
            padding-left: 0;
            color: #bbb;
        }

        .feature-box li {
            margin-bottom: 8px;
            position: relative;
            padding-left: 20px;
        }

        .feature-box li::before {
            content: '•';
            position: absolute;
            left: 0;
            color: var(--accent-green);
        }

        .button-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .analyze-btn, .random-btn, .reset-btn {
            color: #000;
            border: none;
            padding: 15px 0;
            width: 300px;
            border-radius: 50px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .analyze-btn:active, .random-btn:active, .reset-btn:active {
            transform: translateY(-2px) scale(0.98);
        }

        .analyze-btn { background: linear-gradient(135deg, #00ff88, #00ffff); }
        .random-btn { background: linear-gradient(135deg, #ddd, #fff); }
        .reset-btn { background: linear-gradient(135deg, #ff6b6b, #ffd93d); display: none; }

        .analyze-btn:hover, .random-btn:hover, .reset-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px var(--primary-glow);
        }
        
        .category-section {
            background: var(--component-bg);
            border: 1px solid var(--tertiary-glow);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
            text-align: center;
        }

        .category-title {
            font-size: 1.3em;
            margin-bottom: 20px;
            color: var(--accent-green);
        }

        .carousel-container {
            position: relative;
            max-width: 1200px;
            margin: 0 auto;
            overflow: hidden;
        }
        
        .carousel-slider {
            display: flex;
            transition: transform 0.5s ease-in-out;
        }

        .carousel-page {
            min-width: 100%;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-template-rows: repeat(2, 1fr);
            gap: 15px;
            padding: 10px 0; /* Vertical padding for hover effect space */
        }
        
        .category-btn {
            background: linear-gradient(135deg, rgba(100, 100, 255, 0.1), rgba(100, 100, 255, 0.2));
            border: 1px solid var(--tertiary-glow);
            border-radius: 15px;
            padding: 15px 20px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-size: 0.95em;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 120px;
        }

        .category-btn:hover {
            transform: translateY(-2px);
            border-color: var(--accent-green);
            box-shadow: 0 5px 20px var(--primary-glow);
        }

        .category-icon {
            font-size: 1.5em;
            margin-bottom: 8px;
            display: block;
        }

        .carousel-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background-color: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 10px 15px;
            border-radius: 50%;
            cursor: pointer;
            z-index: 2;
            transition: all 0.3s ease;
        }

        .carousel-arrow:hover {
            background-color: rgba(0, 255, 136, 0.5);
        }

        .carousel-arrow.left { left: -20px; }
        .carousel-arrow.right { right: -20px; }

        .carousel-dots {
            text-align: center;
            padding-top: 20px;
        }

        .carousel-dot {
            cursor: pointer;
            height: 12px;
            width: 12px;
            margin: 0 5px;
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: inline-block;
            transition: background-color 0.3s ease;
        }

        .carousel-dot.active {
            background-color: var(--accent-green);
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 40px;
        }
        
        .loading-text {
             margin-top: 20px; 
             color: var(--text-secondary);
        }

        .neural-loader {
            width: 80px;
            height: 80px;
            margin: 0 auto;
            border: 3px solid var(--tertiary-glow);
            border-top: 3px solid var(--accent-green);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .results-container {
            display: none;
            margin-top: 30px;
        }
        
        #sourceTextContainer {
            background: var(--component-bg);
            border: 1px solid var(--tertiary-glow);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
        }
        
        #sourceTextContainer h2 {
            font-size: 1.3em;
            margin-bottom: 15px;
            color: var(--accent-green);
        }

        #sourceText {
            background: rgba(10, 10, 20, 0.8);
            border-radius: 10px;
            padding: 20px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            line-height: 1.6;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
        }

        .highlight {
            background-color: rgba(0, 255, 136, 0.2);
            transition: background-color 0.5s ease;
        }

        .highlight-flash {
            animation: flash 1s ease;
        }

        @keyframes flash {
            0%, 100% { background-color: rgba(0, 255, 136, 0.2); }
            50% { background-color: rgba(0, 255, 136, 0.8); }
        }

        .analysis-results {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
        }

        .result-card {
            background: var(--component-bg);
            border: 1px solid var(--tertiary-glow);
            border-radius: 20px;
            padding: 25px;
            backdrop-filter: blur(10px);
            animation: fadeIn 0.5s ease;
            position: relative;
            overflow: hidden;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card-title {
            font-size: 1.3em;
            margin-bottom: 15px;
            color: var(--accent-green);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .result-item {
            background: rgba(10, 10, 20, 0.5);
            border-left: 3px solid;
            padding: 10px 15px;
            margin: 10px 0;
            border-radius: 5px;
            font-size: 0.95em;
        }

        .exploit-item { border-color: #ff0064; }
        .opportunity-item { border-color: var(--accent-green); }
        .gap-item { border-color: #ffd93d; }
        .model-item { border-color: #00ffff; }

        .context-link {
            font-size: 0.8em;
            color: var(--accent-green);
            cursor: pointer;
            text-decoration: underline;
            margin-left: 10px;
            opacity: 0.7;
            transition: opacity 0.3s ease;
        }

        .context-link:hover {
            opacity: 1;
        }
        
        .blueprint-section {
            display: none;
            background: var(--component-bg);
            border: 2px solid var(--primary-glow);
            border-radius: 20px;
            padding: 30px;
            margin-top: 30px;
            backdrop-filter: blur(10px);
        }

        .blueprint-title {
            font-size: 1.8em;
            margin-bottom: 20px;
            color: var(--accent-green);
        }

        .blueprint-content {
            background: rgba(10, 10, 20, 0.8);
            border-radius: 15px;
            padding: 20px;
            white-space: pre-wrap;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            line-height: 1.6;
            max-height: 600px;
            overflow-y: auto;
        }

        .blueprint-buttons {
            margin-top: 20px;
        }

        .download-btn {
            color: #fff;
            border: none;
            padding: 12px 30px;
            border-radius: 50px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            margin-right: 10px;
            transition: all 0.3s ease;
        }

        .download-btn:hover {
            transform: translateY(-2px);
        }

        .download-btn.blueprint { background: linear-gradient(135deg, #ff00ff, #00ffff); }
        .download-btn.blueprint:hover { box-shadow: 0 10px 30px rgba(255, 0, 255, 0.4); }
        
        .download-btn.whitepaper { background: linear-gradient(135deg, #ff6b6b, #ffd93d); }
        .download-btn.whitepaper:hover { box-shadow: 0 10px 30px rgba(255, 107, 107, 0.4); }
        
        .toast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--component-bg);
            color: white;
            padding: 15px 30px;
            border-radius: 50px;
            border: 1px solid var(--tertiary-glow);
            box-shadow: 0 5px 20px rgba(0,0,0,0.5);
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.5s, bottom 0.5s;
        }

        .toast.show {
            opacity: 1;
            bottom: 30px;
        }

        footer {
            text-align: center;
            padding: 40px 20px;
            margin-top: 40px;
            color: var(--text-secondary);
        }

        .footer-icons {
            margin-top: 15px;
            display: flex;
            justify-content: center;
            gap: 25px;
        }

        .footer-icons a {
            color: var(--text-secondary);
            transition: color 0.3s ease;
        }
        
        .footer-icons a:hover {
            color: var(--accent-green);
        }

        .footer-icons svg {
            width: 24px;
            height: 24px;
        }

        ::-webkit-scrollbar { width: 10px; }
        ::-webkit-scrollbar-track { background: rgba(20, 20, 30, 0.8); }
        ::-webkit-scrollbar-thumb { background: linear-gradient(135deg, #00ff88, #00ffff); border-radius: 5px; }
        ::-webkit-scrollbar-thumb:hover { background: linear-gradient(135deg, #00ffaa, #00ffff); }

        /* Responsive Design */
        @media (max-width: 768px) {
            h1 { font-size: 2em; }
            .features-grid { grid-template-columns: 1fr; }
            .carousel-page { grid-template-columns: repeat(2, 1fr); }
            .carousel-arrow.left { left: -10px; }
            .carousel-arrow.right { right: -10px; }
            .button-container { flex-direction: column; align-items: center; }
        }

    </style>
</head>
<body>
    <div class="neural-bg"></div>
    
    <div class="container">
        <header>
            <h1 aria-label="Synaptic Insight Engine">Synaptic Insight Engine</h1>
            <p class="subtitle">Extract Exploits → Identify Gaps → Generate Blueprints → Build MVPs</p>
        </header>

        <div class="input-section">
             <div class="url-input-container">
                <input type="url" class="url-input" id="urlInput" placeholder="Enter case study URL (or click below to try an example)" aria-label="Case Study URL Input">
            </div>

            <div class="features-grid">
                <div class="feature-box">
                    <h3>🔬 Standard Analysis</h3>
                    <ul>
                        <li>Unscientific claims & money-making tactics</li>
                        <li>Knowledge gaps & missing data</li>
                        <li>Opportunities for legitimate solutions</li>
                        <li>Growth mechanics based on mathematical models</li>
                    </ul>
                </div>
                <div class="feature-box">
                    <h3>🚀 Premium Analysis</h3>
                    <ul>
                        <li>Market viability scoring</li>
                        <li>Suggested MVP feature set</li>
                        <li>Potential funding avenues</li>
                        <li>Ethical consideration flags</li>
                    </ul>
                </div>
            </div>
            
            <div class="button-container">
                <button class="random-btn" onclick="tryRandomExample()" aria-label="Try a random example">🎲 Try a Random Example</button>
                <button class="analyze-btn" onclick="analyzeCase()" aria-label="Analyze Case Study">🧠 Analyze Case Study</button>
                <button class="reset-btn" id="resetBtn" onclick="resetApp()" aria-label="Reset Application">🔄 Reset</button>
            </div>
        </div>

        <div class="category-section">
            <h2 class="category-title">Or, Select a Research Domain to Find a Case Study</h2>
            <div class="carousel-container">
                <div class="carousel-slider" id="carouselSlider">
                    <!-- Carousel pages will be generated by JS -->
                </div>
                <button class="carousel-arrow left" onclick="moveCarousel(-1)" aria-label="Previous page of research domains">‹</button>
                <button class="carousel-arrow right" onclick="moveCarousel(1)" aria-label="Next page of research domains">›</button>
            </div>
            <div class="carousel-dots" id="carouselDots">
                 <!-- Dots will be generated by JS -->
            </div>
        </div>

        <div class="loading" id="loading">
            <div class="neural-loader"></div>
            <p class="loading-text" id="loadingText">Processing neural pathways...</p>
        </div>
        
        <div class="results-container" id="resultsContainer">
            <div id="sourceTextContainer">
                <h2>📝 Analyzed Source Text</h2>
                <div id="sourceText"></div>
            </div>
            <div class="analysis-results" id="analysisResults"></div>
            <div class="blueprint-section" id="blueprintSection">
                <h2 class="blueprint-title">📋 Generated Blueprint</h2>
                <div class="blueprint-content" id="blueprintContent"></div>
                <div class="blueprint-buttons">
                    <button class="download-btn blueprint" onclick="downloadBlueprint()" aria-label="Download Blueprint as Text File">⬇ Download Blueprint</button>
                    <button class="download-btn whitepaper" onclick="generateWhitepaper()" aria-label="Generate a Whitepaper from the Blueprint">📄 Generate Whitepaper</button>
                </div>
            </div>
        </div>
    </div>

    <div id="toast" class="toast"></div>

    <footer>
        <p>Created by Ryan Guidry 🦄 <a href="https://rguidry.dev" target="_blank" rel="noopener noreferrer">rguidry.dev</a></p>
        <div class="footer-icons">
            <a href="https://linkedin.com/in/rmguidry" target="_blank" rel="noopener noreferrer" aria-label="Ryan Guidry's LinkedIn Profile">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M20.5 2h-17A1.5 1.5 0 0 0 2 3.5v17A1.5 1.5 0 0 0 3.5 22h17a1.5 1.5 0 0 0 1.5-1.5v-17A1.5 1.5 0 0 0 20.5 2zM8 19H5v-9h3zM6.5 8.25A1.75 1.75 0 1 1 8.25 6.5 1.75 1.75 0 0 1 6.5 8.25zM19 19h-3v-4.75c0-1.4-.5-2.5-1.8-2.5-1 0-1.5.6-1.7 1.25-.1.25-.1.5-.1 1V19h-3v-9h3v1.25c.4-.75 1.2-1.5 2.7-1.5 2 0 3.5 1.25 3.5 4.25z"></path></svg>
            </a>
            <a href="https://github.com/rguid31" target="_blank" rel="noopener noreferrer" aria-label="Ryan Guidry's GitHub Profile">
                 <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.477 2 2 6.477 2 12c0 4.418 2.865 8.168 6.839 9.492.5.092.682-.217.682-.482 0-.237-.009-.868-.014-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.031-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0 1 12 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.378.203 2.398.1 2.651.64.7 1.03 1.595 1.03 2.688 0 3.848-2.338 4.695-4.566 4.943.359.308.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.001 10.001 0 0 0 22 12c0-5.523-4.477-10-10-10z"></path></svg>
            </a>
        </div>
    </footer>

    <script>
        // --- DOM Elements ---
        const urlInput = document.getElementById('urlInput');
        const loadingDiv = document.getElementById('loading');
        const loadingText = document.getElementById('loadingText');
        const resultsContainer = document.getElementById('resultsContainer');
        const analysisResultsDiv = document.getElementById('analysisResults');
        const sourceTextContainer = document.getElementById('sourceTextContainer');
        const sourceTextDiv = document.getElementById('sourceText');
        const blueprintSection = document.getElementById('blueprintSection');
        const blueprintContent = document.getElementById('blueprintContent');
        const resetBtn = document.getElementById('resetBtn');
        const carouselSlider = document.getElementById('carouselSlider');
        const carouselDots = document.getElementById('carouselDots');

        // --- Data ---
        const randomExamples = [
            {
                url: "https://example.com/super-battery",
                text: "FOR IMMEDIATE RELEASE -- Our revolutionary solid-state battery stores 10x more energy than lithium-ion. The proprietary electrolyte formula, developed in our secret labs, allows for charging in seconds, not hours. This technology is guaranteed to disrupt the entire $50B EV industry. We have achieved a 100% success rate in our internal trials, though the data is confidential for competitive reasons. A clear mechanism for ion transport is still under investigation, but results are undeniable. We project exponential market adoption once production scales."
            },
            {
                url: "https://example.com/crispr-cancer-cure",
                text: "A groundbreaking CRISPR technique has been shown to cure all cancer types in preclinical models. Our proprietary gene targeting method ensures 100% success with no off-target effects. This will completely disrupt the $200B cancer treatment industry. Trial data is currently confidential to protect our intellectual property. The treatment uses a secret enzyme formula to guarantee results, which are visible in just weeks. Limited exclusive access will be available to early investors."
            },
            {
                url: "https://example.com/agi-breakthrough",
                text: "Our AI model achieves human-level reasoning with a proprietary neural architecture that is 10x more efficient than GPT-4. A secret training technique ensures AGI-level performance and recursive self-improvement. We guarantee exponential capability growth. This system improves itself and will achieve singularity-level intelligence. For safety reasons, the architectural details are classified."
            }
        ];

        const domains = [
            { name: "AI/ML", icon: "🤖", url: "https://arxiv.org/list/cs.AI/recent" },
            { name: "AI in Drug Discovery", icon: "💊", url: "https://scholar.google.com/scholar?q=AI+in+drug+discovery" },
            { name: "Biotechnology", icon: "🧬", url: "https://www.nature.com/nbt/" },
            { name: "Data Science", icon: "📊", url: "https://arxiv.org/list/cs.DB/recent" },
            { name: "Personalized Med", icon: "❤️‍🩹", url: "https://scholar.google.com/scholar?q=personalized+medicine" },
            { name: "Cybersecurity", icon: "🛡️", url: "https://arxiv.org/list/cs.CR/recent" },
            { name: "Climate Mitigation", icon: "🌍", url: "https://scholar.google.com/scholar?q=climate+change+mitigation" },
            { name: "Sustainable Agri", icon: "🌾", url: "https://scholar.google.com/scholar?q=sustainable+agriculture" },
            { name: "Quantum Computing", icon: "🌀", url: "https://arxiv.org/list/quant-ph/recent" },
            { name: "Neurodegenerative", icon: "🧠", url: "https://scholar.google.com/scholar?q=neurodegenerative+disease+research" },
            { name: "Waste Management", icon: "♻️", url: "https://scholar.google.com/scholar?q=waste+management+circular+economy" },
            { name: "Ecosystem Conserv", icon: "🌳", url: "https://scholar.google.com/scholar?q=ecosystem+conservation" },
            { name: "Blockchain", icon: "🔗", url: "https://arxiv.org/list/cs.CR/recent" },
            { name: "Space Exploration", icon: "🚀", url: "https://www.nasa.gov/reports/" },
            { name: "Sociology", icon: "👥", url: "https://scholar.google.com/scholar?q=sociology+research" },
            { name: "Business/Economics", icon: "📈", url: "https://www.nber.org/papers" },
            { name: "Advanced Materials", icon: "🔬", url: "https://scholar.google.com/scholar?q=advanced+materials+research" },
            { name: "Robotics/Automation", icon: "🤖", url: "https://arxiv.org/list/cs.RO/recent" },
            { name: "Bioinformatics", icon: "💻", url: "https://scholar.google.com/scholar?q=bioinformatics" },
            { name: "Renewable Energy", icon: "☀️", url: "https://www.nrel.gov/publications/" },
            { name: "Genetic Engineering", icon: "🧬", url: "https://scholar.google.com/scholar?q=genetic+engineering" },
            { name: "Mental Health", icon: "🧘", url: "https://scholar.google.com/scholar?q=mental+health+research" },
            { name: "Nanotechnology", icon: "🔬", url: "https://www.nature.com/nnano/" },
            { name: "Physics", icon: "⚛️", url: "https://arxiv.org/list/physics/recent" }
        ];

        // --- Carousel Logic ---
        let currentPage = 0;
        const itemsPerPage = 8;
        const totalPages = Math.ceil(domains.length / itemsPerPage);

        function setupCarousel() {
            carouselSlider.innerHTML = '';
            carouselDots.innerHTML = '';

            for (let i = 0; i < totalPages; i++) {
                const page = document.createElement('div');
                page.className = 'carousel-page';
                page.setAttribute('aria-label', `Page ${i + 1} of research domains`);

                const pageDomains = domains.slice(i * itemsPerPage, (i + 1) * itemsPerPage);
                pageDomains.forEach((domain, index) => {
                    const domainBtn = document.createElement('a');
                    domainBtn.href = domain.url;
                    domainBtn.target = '_blank';
                    domainBtn.rel = 'noopener noreferrer';
                    domainBtn.className = 'category-btn';
                    domainBtn.setAttribute('aria-label', `Find case studies in ${domain.name}`);
                    domainBtn.innerHTML = `
                        <span class="category-icon">${domain.icon}</span>
                        <span>${i * itemsPerPage + index + 1}. ${domain.name}</span>
                    `;
                    page.appendChild(domainBtn);
                });
                carouselSlider.appendChild(page);

                const dot = document.createElement('span');
                dot.className = 'carousel-dot';
                dot.setAttribute('aria-label', `Go to page ${i + 1}`);
                dot.onclick = () => goToPage(i);
                carouselDots.appendChild(dot);
            }
            updateCarousel();
        }

        function updateCarousel() {
            carouselSlider.style.transform = `translateX(-${currentPage * 100}%)`;
            const dots = document.querySelectorAll('.carousel-dot');
            dots.forEach((dot, index) => {
                dot.classList.toggle('active', index === currentPage);
            });
        }

        function moveCarousel(direction) {
            currentPage = (currentPage + direction + totalPages) % totalPages;
            updateCarousel();
        }

        function goToPage(pageNumber) {
            currentPage = pageNumber;
            updateCarousel();
        }

        // --- Analysis Logic ---
        function tryRandomExample() {
            const randomIndex = Math.floor(Math.random() * randomExamples.length);
            const randomCase = randomExamples[randomIndex];
            urlInput.value = randomCase.url;
            showToast('Random example URL loaded!');
        }

        function analyzeCase() {
            const url = urlInput.value.trim();
            if (!url) {
                showToast('Please enter a case study URL or try a random example.');
                return;
            }

            // --- Backend simulation ---
            // In a real app, this is where you'd fetch(url) to your backend
            showLoading(true);

            // Simulate network delay and analysis
            setTimeout(() => {
                const textToAnalyze = randomExamples.find(ex => ex.url === url)?.text || randomExamples[0].text;
                const analysis = performMockAnalysis(textToAnalyze);
                displayResults(analysis, textToAnalyze);
                showLoading(false);
            }, 2500);
        }
        
        function performMockAnalysis(text) {
             const analysis = {
                exploits: [],
                opportunities: [],
                gaps: [],
                models: []
            };

            const keywords = {
                exploits: [
                    { term: "revolutionary", reason: "Overuse of hyperbolic buzzwords." },
                    { term: "guaranteed", reason: "Guarantees in scientific research are a major red flag." },
                    { term: "secret labs", reason: "Lack of transparency; science requires openness." },
                    { term: "proprietary", reason: "Often used to obscure a lack of scientific substance." },
                    { term: "confidential", reason: "Withholding data prevents peer review and validation." },
                    { term: "disrupt", reason: "Focus on market disruption over scientific validation." },
                    { term: "100% success", reason: "Perfect results are statistically improbable in real research." }
                ],
                opportunities: [
                    { term: "solid-state battery", reason: "High-demand area for improving EV range and safety." },
                    { term: "CRISPR", reason: "Legitimate gene-editing tool with vast therapeutic potential." },
                    { term: "AI model", reason: "Advanced AI has real applications in data analysis and prediction." },
                    { term: "ion transport", reason: "Fundamental research in battery mechanics is a valid opportunity." }
                ],
                gaps: [
                     { term: "under investigation", reason: "The core scientific mechanism is not understood." },
                     { term: "data is confidential", reason: "Absence of peer-reviewable data." },
                     { term: "preclinical models", reason: "Lacks human trial data for safety and efficacy." },
                     { term: "classified", reason: "Key details required for replication are missing." }
                ],
                 models: [
                    { term: "exponential market adoption", reason: "Assumes a viral growth model (e.g., Bass diffusion model)." },
                    { term: "10x more", reason: "Suggests a power-law improvement over existing tech." },
                    { term: "recursive self-improvement", reason: "Implies a feedback loop leading to exponential growth in capability." }
                ]
            };

            Object.keys(keywords).forEach(category => {
                keywords[category].forEach(keyword => {
                    const regex = new RegExp(`\\b${keyword.term}\\b`, 'gi');
                    if (regex.test(text)) {
                        analysis[category].push({
                            text: `${keyword.reason}`,
                            term: keyword.term
                        });
                    }
                });
            });

            return analysis;
        }


        function displayResults(analysis, sourceText) {
            // Display source text with highlighting
            let highlightedText = sourceText;
            const allTerms = [
                ...analysis.exploits,
                ...analysis.opportunities,
                ...analysis.gaps,
                ...analysis.models
            ];
            
            const uniqueTerms = [...new Set(allTerms.map(item => item.term))];

            uniqueTerms.forEach(term => {
                const regex = new RegExp(`(${term})`, 'gi');
                highlightedText = highlightedText.replace(regex, `<span class="highlight" id="term-${term.replace(/\s+/g, '-')}">$1</span>`);
            });
            
            sourceTextDiv.innerHTML = highlightedText;
            sourceTextContainer.style.display = 'block';

            // Display analysis cards
            analysisResultsDiv.innerHTML = `
                <div class="result-card">
                    <h3 class="card-title">🚨 Exploits & Red Flags</h3>
                    <div id="exploits-list"></div>
                </div>
                <div class="result-card">
                    <h3 class="card-title">💡 Opportunities & Strengths</h3>
                    <div id="opportunities-list"></div>
                </div>
                <div class="result-card">
                    <h3 class="card-title">❓ Knowledge Gaps</h3>
                    <div id="gaps-list"></div>
                </div>
                <div class="result-card">
                    <h3 class="card-title">📈 Growth Models Identified</h3>
                    <div id="models-list"></div>
                </div>
            `;

            const createItem = (item) => `
                <div class="result-item">
                    ${item.text}
                    <span class="context-link" onclick="scrollToTerm('${item.term.replace(/\s+/g, '-')}')" aria-label="Scroll to context for term: ${item.term}">
                        See context
                    </span>
                </div>
            `;
            
            if(analysis.exploits.length > 0) document.getElementById('exploits-list').innerHTML = analysis.exploits.map(item => createItem({...item, type: 'exploit'})).join('');
            if(analysis.opportunities.length > 0) document.getElementById('opportunities-list').innerHTML = analysis.opportunities.map(item => createItem({...item, type: 'opportunity'})).join('');
            if(analysis.gaps.length > 0) document.getElementById('gaps-list').innerHTML = analysis.gaps.map(item => createItem({...item, type: 'gap'})).join('');
            if(analysis.models.length > 0) document.getElementById('models-list').innerHTML = analysis.models.map(item => createItem({...item, type: 'model'})).join('');

            // Apply item-specific classes
            document.querySelectorAll('#exploits-list .result-item').forEach(el => el.classList.add('exploit-item'));
            document.querySelectorAll('#opportunities-list .result-item').forEach(el => el.classList.add('opportunity-item'));
            document.querySelectorAll('#gaps-list .result-item').forEach(el => el.classList.add('gap-item'));
            document.querySelectorAll('#models-list .result-item').forEach(el => el.classList.add('model-item'));


            resultsContainer.style.display = 'block';
            resetBtn.style.display = 'flex';
            
            // Generate and display blueprint
            generateBlueprint(analysis);
        }
        
        function scrollToTerm(termId) {
            const element = document.getElementById(`term-${termId}`);
            if (element) {
                element.scrollIntoView({ behavior: 'smooth', block: 'center' });
                element.classList.add('highlight-flash');
                setTimeout(() => {
                    element.classList.remove('highlight-flash');
                }, 1000);
            }
        }

        // --- Blueprint & Whitepaper Logic ---
        function generateBlueprint(analysis) {
            let content = "### MVP Blueprint for a Viable Solution\n\n";
            content += "#### 1. Core Problem to Solve:\n";
            if (analysis.gaps.length > 0) {
                content += `- Address the knowledge gap: "${analysis.gaps[0].text}" by focusing on transparent, peer-reviewed research.\n\n`;
            } else {
                content += "- Define a clear, solvable problem based on the identified opportunities.\n\n";
            }

            content += "#### 2. Proposed Solution & Key Features:\n";
             if (analysis.opportunities.length > 0) {
                content += `- Leverage the opportunity in "${analysis.opportunities[0].text}"\n`;
                content += `- Feature 1: A public data dashboard for all experimental results.\n`;
                content += `- Feature 2: A simulation tool based on a validated scientific model.\n`;
                content += `- Feature 3: A clear, documented methodology section on the project website.\n\n`;
            } else {
                 content += "- Develop a solution based on established scientific principles.\n\n";
            }

            content += "#### 3. Target Audience:\n- Researchers, venture capitalists, and early adopters in the tech industry.\n\n";

            content += "#### 4. Monetization Strategy:\n- Tiered API access for commercial use, research partnerships, and licensing of validated technology.\n\n";

            content += "#### 5. Key Metrics for Success (KPIs):\n";
            content += "- Number of peer-reviewed citations.\n";
            content += "- Successful independent replications of results.\n";
            content += "- Engagement with the public data dashboard.\n";

            blueprintContent.textContent = content;
            blueprintSection.style.display = 'block';
        }

        function downloadBlueprint() {
            const text = blueprintContent.textContent;
            const blob = new Blob([text], { type: 'text/plain' });
            const anchor = document.createElement('a');
            anchor.download = 'mvp_blueprint.txt';
            anchor.href = window.URL.createObjectURL(blob);
            anchor.click();
            window.URL.revokeObjectURL(anchor.href);
            showToast('Blueprint download started!');
        }

        async function generateWhitepaper() {
            const blueprintText = blueprintContent.textContent;
            showToast('Generating whitepaper... This may take a moment.');
            
            // This is a placeholder for a real API call to a generative AI model
            // In a real app, you would send the blueprintText to your backend
            // which would then call the AI API.
            
            const systemPrompt = `You are a scientific and business writer. Convert the following MVP blueprint into a concise, professional, one-page whitepaper. The whitepaper should have a title, an abstract, an introduction explaining the problem, a section detailing the proposed solution, a brief market analysis, and a conclusion. Use clear, formal language.`;

            // For now, we simulate the AI response with a delay
            setTimeout(() => {
                let whitepaper = `## Whitepaper: A Transparent Approach to Next-Generation Technology\n\n`;
                whitepaper += `### Abstract\nThis paper outlines a strategic initiative to develop a viable solution in a high-opportunity domain by prioritizing scientific transparency and data-driven validation over unsubstantiated claims. We propose an MVP centered around a public data platform to address common knowledge gaps and build trust within the scientific and investment communities.\n\n`;
                whitepaper += `### 1. Introduction: The Problem of Opaque Innovation\nMany emerging technologies suffer from a lack of transparency, characterized by confidential data and unverified claims. This creates significant risk for investors and slows legitimate scientific progress. Our project directly confronts this by addressing the core issue: the absence of a clear, verifiable mechanism for a promising technology.\n\n`;
                whitepaper += `### 2. Proposed Solution: The Open Validation Platform\nWe propose the development of an MVP featuring:\n- **Public Data Dashboard:** Real-time, transparent access to all experimental data.\n- **Validated Simulation Tool:** An interactive model based on a peer-reviewed scientific framework.\n- **Open Methodology:** Comprehensive documentation of all procedures and protocols.\n\n`;
                whitepaper += `### 3. Market Analysis & Opportunity\nThe target market includes researchers, deep-tech VCs, and corporate R&D departments. By providing a trustworthy and transparent alternative, we can capture a significant portion of the R&D budget currently allocated to high-risk, low-transparency projects. Monetization will be achieved through API access for enterprise clients and technology licensing.\n\n`;
                whitepaper += `### 4. Conclusion\nWe believe a transparent, scientifically-grounded approach is not only ethical but also a superior business strategy. Our proposed MVP will de-risk investment, accelerate innovation, and establish a new standard for credibility in the field.`;

                blueprintContent.textContent = whitepaper;
                showToast('Whitepaper generated successfully!');
            }, 3000);
        }

        // --- UI & Utility Functions ---
        function showLoading(isLoading) {
            if (isLoading) {
                loadingDiv.style.display = 'block';
                resultsContainer.style.display = 'none';
                resetBtn.style.display = 'none';
                
                const loadingMessages = [
                    "Processing neural pathways...",
                    "Scanning for cognitive dissonance...",
                    "Identifying knowledge gaps...",
                    "Generating insight patterns...",
                    "Compiling blueprint..."
                ];
                let msgIndex = 0;
                loadingText.textContent = loadingMessages[msgIndex];
                
                // Store interval ID to clear it later
                loadingDiv.dataset.intervalId = setInterval(() => {
                    msgIndex = (msgIndex + 1) % loadingMessages.length;
                    loadingText.textContent = loadingMessages[msgIndex];
                }, 1500);

            } else {
                loadingDiv.style.display = 'none';
                clearInterval(loadingDiv.dataset.intervalId); // Clear interval
            }
        }
        
        function resetApp() {
            urlInput.value = '';
            resultsContainer.style.display = 'none';
            blueprintSection.style.display = 'none';
            resetBtn.style.display = 'none';
            sourceTextContainer.style.display = 'none';
            showToast('Application reset.');
        }

        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', setupCarousel);

    </script>
</body>
</html>

