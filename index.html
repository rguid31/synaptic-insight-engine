<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Synaptic Insight Engine</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            scroll-behavior: smooth;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0a0a0a;
            color: #e0e0e0;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        .neural-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            opacity: 0.15;
            background: 
                radial-gradient(circle at 20% 50%, #00ff8840 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, #ff00ff40 0%, transparent 50%),
                radial-gradient(circle at 40% 20%, #00ffff40 0%, transparent 50%);
            animation: pulse 10s ease-in-out infinite;
        }

        @keyframes pulse { 0%, 100% { opacity: 0.15; } 50% { opacity: 0.25; } }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        header {
            background: linear-gradient(135deg, rgba(20, 20, 30, 0.95), rgba(30, 20, 40, 0.95));
            border: 1px solid rgba(100, 100, 255, 0.3);
            border-radius: 25px;
            padding: 40px;
            margin-bottom: 30px;
            backdrop-filter: blur(20px);
            box-shadow: 0 0 40px rgba(100, 100, 255, 0.2), inset 0 0 20px rgba(100, 100, 255, 0.1);
            position: relative;
            overflow: hidden;
            text-align: center; /* <<< Center the title and subtitle */
        }

        header::before {
            content: '';
            position: absolute;
            top: -50%; left: -50%;
            width: 200%; height: 200%;
            background: radial-gradient(circle, rgba(100, 100, 255, 0.1) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }

        @keyframes rotate { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #00ff88, #00ffff, #ff00ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .subtitle { color: #888; font-size: 1.1em; }

        .category-section {
            background: rgba(20, 20, 30, 0.9);
            border: 1px solid rgba(100, 100, 255, 0.2);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
        }

        .category-title {
            font-size: 1.3em;
            margin-bottom: 20px;
            color: #00ff88;
            text-align: center;
        }

        .carousel-container {
            position: relative;
            overflow: hidden;
            padding: 0 50px; /* Provides space for arrows */
        }

        .category-grid {
            display: flex; /* Changed from grid to flex for carousel sliding */
            transition: transform 0.5s ease-in-out;
            gap: 15px; /* Adds space between carousel pages */
        }

        .category-page {
            flex: 0 0 100%; /* Each page takes the full container width */
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-template-rows: repeat(2, 1fr);
            gap: 15px;
        }

        .category-btn {
            background: linear-gradient(135deg, rgba(100, 100, 255, 0.1), rgba(100, 100, 255, 0.2));
            border: 1px solid rgba(100, 100, 255, 0.3);
            border-radius: 15px;
            padding: 15px;
            color: #e0e0e0;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-size: 0.9em;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 110px;
        }
        .category-btn:hover {
            transform: translateY(-2px);
            border-color: #00ff88;
            box-shadow: 0 5px 20px rgba(0, 255, 136, 0.3);
        }
        .category-icon { font-size: 1.5em; margin-bottom: 8px; display: block; }

        .carousel-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(100, 100, 255, 0.2);
            border: 1px solid rgba(100, 100, 255, 0.4);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            color: #e0e0e0;
            cursor: pointer;
            z-index: 2;
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        .carousel-arrow:hover { background: rgba(0, 255, 136, 0.4); }
        .arrow-left { left: 0; }
        .arrow-right { right: 0; }
        
        .carousel-indicators {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-top: 20px;
        }

        .indicator-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: rgba(100, 100, 255, 0.3);
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .indicator-dot.active {
            background-color: #00ff88;
        }


        .input-section {
            background: rgba(20, 20, 30, 0.8);
            border: 1px solid rgba(100, 100, 255, 0.2);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
        }
        .url-input {
            width: 100%;
            padding: 15px 20px;
            background: rgba(10, 10, 20, 0.8);
            border: 2px solid rgba(100, 100, 255, 0.3);
            border-radius: 15px;
            color: #e0e0e0;
            font-size: 1.1em;
            margin-bottom: 25px;
            transition: all 0.3s ease;
        }
        .url-input:focus {
            outline: none;
            border-color: #00ff88;
            box-shadow: 0 0 25px rgba(0, 255, 136, 0.4);
        }
        
        .input-explanation-container {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 0 auto 25px auto;
            max-width: 800px;
        }

        .explanation-column {
            background: rgba(10, 10, 20, 0.5);
            border: 1px solid rgba(100, 100, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            flex: 1;
        }
        
        .explanation-column h4 {
            color: #00ffff;
            margin-bottom: 15px;
            text-align: center;
        }

        .explanation-column ul {
            list-style-type: none;
            padding-left: 0;
            color: #aaa;
            font-size: 0.9em;
            line-height: 1.6;
        }
        
        .explanation-column li {
            margin-bottom: 8px;
            padding-left: 20px;
            position: relative;
        }
        
        .explanation-column li::before {
            content: '•';
            position: absolute;
            left: 0;
            color: #00ff88;
            font-weight: bold;
        }
        
        .button-group {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .analyze-btn, .random-btn, .reset-btn {
            color: #000;
            border: none;
            padding: 15px 0; /* Vertical padding only */
            width: 300px; /* Fixed width - increased for better text spacing */
            border-radius: 50px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            text-align: center;
        }
        .analyze-btn { background: linear-gradient(135deg, #00ff88, #00ffff); }
        .random-btn { background: linear-gradient(135deg, #888, #bbb); }
        .reset-btn { background: linear-gradient(135deg, #ff6b6b, #f0932b); font-size: 1em; padding: 15px 30px; display: none; width: auto; }

        .analyze-btn:hover, .random-btn:hover, .reset-btn:hover { 
            transform: translateY(-2px); 
        }
        .analyze-btn:hover { box-shadow: 0 10px 30px rgba(0, 255, 136, 0.4); }
        .random-btn:hover { box-shadow: 0 10px 30px rgba(150, 150, 150, 0.4); }
        .reset-btn:hover { box-shadow: 0 10px 30px rgba(255, 107, 107, 0.4); }
        
        .analyze-btn:active, .random-btn:active, .reset-btn:active, .download-btn:active {
            transform: translateY(0px) scale(0.98);
        }
        
        .source-text-section { display: none; background: rgba(20, 20, 30, 0.9); border: 1px solid rgba(100, 100, 255, 0.2); border-radius: 20px; padding: 25px; margin-top: 30px; }
        .source-text-display { background: rgba(10, 10, 20, 0.8); border-radius: 15px; padding: 20px; margin-top: 15px; font-family: 'Courier New', monospace; font-size: 0.95em; line-height: 1.6; white-space: pre-wrap; max-height: 400px; overflow-y: auto; }
        .source-text-display .highlight { background-color: rgba(255, 255, 0, 0.2); border-radius: 3px; padding: 2px 0; transition: background-color 0.3s ease-in-out; }
        .source-text-display .highlight-active { background-color: rgba(0, 255, 136, 0.5) !important; }

        .analysis-results { display: none; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 20px; margin-top: 30px; }
        .result-card { background: rgba(20, 20, 30, 0.9); border: 1px solid rgba(100, 100, 255, 0.2); border-radius: 20px; padding: 25px; backdrop-filter: blur(10px); animation: fadeIn 0.5s ease; position: relative; overflow: hidden; }
        .result-card .context-link { font-size: 0.8em; color: #00ffff; text-decoration: none; margin-left: 8px; opacity: 0.7; transition: opacity 0.3s; cursor: pointer; }
        .result-card .context-link:hover { opacity: 1; text-decoration: underline; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .card-title { font-size: 1.3em; margin-bottom: 15px; color: #00ff88; display: flex; align-items: center; gap: 10px; }
        .card-icon { width: 30px; height: 30px; background: linear-gradient(135deg, #00ff88, #00ffff); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.2em; }
        .exploit-item { background: rgba(255, 0, 100, 0.1); border-left: 3px solid #ff0064; padding: 10px 15px; margin: 10px 0; border-radius: 5px; font-size: 0.95em; }
        .opportunity-item { background: rgba(0, 255, 136, 0.1); border-left: 3px solid #00ff88; padding: 10px 15px; margin: 10px 0; border-radius: 5px; font-size: 0.95em; }
        .growth-model { background: rgba(10, 10, 20, 0.8); border-radius: 10px; padding: 15px; margin-top: 15px; font-family: 'Courier New', monospace; font-size: 0.9em; }
        .metric { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid rgba(100, 100, 255, 0.1); }
        .metric-value { color: #00ffff; font-weight: bold; }

        .blueprint-section { display: none; background: rgba(20, 20, 30, 0.9); border: 2px solid rgba(0, 255, 136, 0.3); border-radius: 20px; padding: 30px; margin-top: 30px; backdrop-filter: blur(10px); }
        .blueprint-title { font-size: 1.8em; margin-bottom: 20px; color: #00ff88; }
        .blueprint-content { background: rgba(10, 10, 20, 0.8); border-radius: 15px; padding: 20px; white-space: pre-wrap; font-family: 'Courier New', monospace; font-size: 0.9em; line-height: 1.6; max-height: 600px; overflow-y: auto; transition: all 0.3s ease; }
        .blueprint-content.loading-ai { opacity: 0.5; position: relative; }
        .blueprint-content.loading-ai::after { content: '🧠 Generating Whitepaper with AI...'; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: #00ff88; font-size: 1.2em; font-weight: bold; }
        .download-btn { background: linear-gradient(135deg, #ff00ff, #00ffff); color: #fff; border: none; padding: 12px 30px; border-radius: 50px; font-size: 1em; font-weight: bold; cursor: pointer; margin-top: 20px; margin-right: 10px; transition: all 0.3s ease; }
        .download-btn:hover { transform: translateY(-2px); box-shadow: 0 10px 30px rgba(255, 0, 255, 0.4); }
        .download-btn:disabled { background: #555; cursor: not-allowed; opacity: 0.7; }

        .loading { display: none; text-align: center; padding: 40px; }
        .neural-loader { width: 80px; height: 80px; margin: 0 auto 20px; border: 3px solid rgba(100, 100, 255, 0.2); border-top: 3px solid #00ff88; border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        #toast-container { position: fixed; bottom: 20px; right: 20px; z-index: 9999; display: flex; flex-direction: column; gap: 10px; }
        .toast { background: linear-gradient(135deg, #00ff88, #00ffff); color: #000; padding: 15px 25px; border-radius: 10px; box-shadow: 0 5px 20px rgba(0, 255, 136, 0.4); animation: slideIn 0.5s forwards, fadeOut 0.5s 4.5s forwards; font-weight: bold; }
        @keyframes slideIn { from { transform: translateX(120%); } to { transform: translateX(0); } }
        @keyframes fadeOut { from { opacity: 1; } to { opacity: 0; } }

        ::-webkit-scrollbar { width: 10px; }
        ::-webkit-scrollbar-track { background: rgba(20, 20, 30, 0.8); border-radius: 5px; }
        ::-webkit-scrollbar-thumb { background: linear-gradient(135deg, #00ff88, #00ffff); border-radius: 5px; }
        
        /* Footer Styles */
        footer {
            text-align: center;
            padding: 40px 20px 20px 20px;
            color: #888;
            font-size: 0.9em;
        }

        footer .portfolio-link {
            color: #00ffff;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        footer .portfolio-link:hover {
            color: #00ff88;
            text-decoration: underline;
        }
        
        .social-icons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 15px;
        }
        
        .social-icon {
            color: #888;
            transition: color 0.3s ease, transform 0.3s ease;
        }
        
        .social-icon:hover {
            color: #00ff88;
            transform: scale(1.1);
        }
        
        .social-icon svg {
            width: 24px;
            height: 24px;
        }

        /* Responsive Design for Mobile */
        @media (max-width: 768px) {
            h1 { font-size: 2em; }
            .container { padding: 10px; }
            header { padding: 30px; }
            .input-explanation-container { flex-direction: column; }
            .category-page { grid-template-columns: repeat(2, 1fr); }
            .carousel-container { padding: 0 45px; }
            .analyze-btn, .random-btn { width: 100%; }
        }
    </style>
</head>
<body>
    <div class="neural-bg"></div>
    <div id="toast-container"></div>
    
    <div class="container">
        <header>
            <h1>Synaptic Insight Engine</h1>
            <p class="subtitle">Extract Exploits → Identify Gaps → Generate Blueprints → Build MVPs</p>
        </header>

        <div class="input-section" role="region" aria-labelledby="input-heading">
            <h2 id="input-heading" class="sr-only">Analysis Input</h2> <!-- Hidden heading for screen readers -->
            <input type="url" class="url-input" id="urlInput" placeholder="Enter case study URL to begin analysis..." aria-label="Case Study URL Input">
            <div class="input-explanation-container">
                <div class="explanation-column">
                    <h4>Standard Analysis</h4>
                    <ul>
                        <li>Unscientific claims & money-making tactics</li>
                        <li>Knowledge gaps & missing data</li>
                        <li>Opportunities for legitimate solutions</li>
                        <li>Growth mechanics based on mathematical models</li>
                    </ul>
                </div>
                <div class="explanation-column">
                    <h4>Premium Analysis Features</h4>
                    <ul>
                        <li>Compare against historical data & trends</li>
                        <li>Generate financial models & ROI projections</li>
                        <li>Identify key researchers & competing labs</li>
                        <li>Perform patent landscape analysis</li>
                    </ul>
                </div>
            </div>
            <div class="button-group">
                <button class="random-btn" onclick="loadRandomExample()" aria-label="Load a random example case study">🎲 Try a Random Example</button>
                <button class="analyze-btn" onclick="analyzeCase()" aria-label="Analyze the case study URL provided in the input field">🧠 Analyze Case Study</button>
                <button class="reset-btn" id="resetBtn" onclick="resetApp()" aria-label="Reset the application and clear all results">🔄 Reset</button>
            </div>
        </div>

        <div class="category-section" role="region" aria-labelledby="domain-heading">
            <h2 class="category-title" id="domain-heading">Or, Select a Research Domain to Find a Case Study</h2>
            <div class="carousel-container">
                <div class="category-grid" id="categoryGrid"></div>
                <button class="carousel-arrow arrow-left" onclick="navigateCarousel(-1)" aria-label="Previous page of research domains">&#10094;</button>
                <button class="carousel-arrow arrow-right" onclick="navigateCarousel(1)" aria-label="Next page of research domains">&#10095;</button>
            </div>
            <div class="carousel-indicators" id="carouselIndicators"></div>
        </div>

        <div class="loading" id="loadingSection">
            <div class="neural-loader"></div>
            <p id="loadingText" style="color: #888;">Processing neural pathways...</p>
        </div>
        
        <div class="source-text-section" id="sourceTextSection" role="region" aria-labelledby="source-text-heading">
             <h3 class="card-title" id="source-text-heading">📝 Analyzed Source Text</h3>
             <div class="source-text-display" id="sourceTextDisplay"></div>
        </div>

        <div class="analysis-results" id="results" role="region" aria-labelledby="analysis-results-heading">
            <h2 id="analysis-results-heading" class="sr-only">Analysis Results</h2> <!-- Hidden heading for screen readers -->
        </div>

        <div class="blueprint-section" id="blueprintSection" role="region" aria-labelledby="blueprint-heading">
            <h2 class="blueprint-title" id="blueprintTitle">📋 Generated Blueprint</h2>
            <div class="blueprint-content" id="blueprintContent"></div>
            <button id="downloadBtn" class="download-btn" onclick="downloadBlueprint()" aria-label="Download the generated content as a text file">⬇ Download Blueprint</button>
            <button id="whitepaperBtn" class="download-btn" onclick="generateWhitepaperWithAI()" style="background: linear-gradient(135deg, #ff6b6b, #ffd93d);" aria-label="Use AI to generate a whitepaper from the blueprint">📄 Generate Whitepaper</button>
        </div>

        <footer>
            <p>Created by Ryan Guidry 🦄 <a href="https://rguidry.dev" target="_blank" rel="noopener noreferrer" class="portfolio-link">rguidry.dev</a></p>
            <div class="social-icons">
                <a href="https://linkedin.com/in/rmguidry" target="_blank" rel="noopener noreferrer" class="social-icon" aria-label="LinkedIn Profile">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="24" height="24"><path d="M20.5 2h-17A1.5 1.5 0 0 0 2 3.5v17A1.5 1.5 0 0 0 3.5 22h17a1.5 1.5 0 0 0 1.5-1.5v-17A1.5 1.5 0 0 0 20.5 2ZM8 19H5V8h3v11ZM6.5 6.73c-.97 0-1.75-.78-1.75-1.75S5.53 3.23 6.5 3.23c.97 0 1.75.78 1.75 1.75S7.47 6.73 6.5 6.73ZM19 19h-3v-5.6c0-1.33-.03-3.04-1.85-3.04-1.85 0-2.13 1.44-2.13 2.94V19h-3V8h3v1.38h.04c.42-.79 1.44-1.63 2.87-1.63 3.07 0 3.63 2.02 3.63 4.64V19Z"/></svg>
                </a>
                <a href="https://github.com/rguid31" target="_blank" rel="noopener noreferrer" class="social-icon" aria-label="GitHub Profile">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="24" height="24"><path d="M12 2C6.477 2 2 6.477 2 12c0 4.418 2.865 8.165 6.839 9.489.5.092.682-.217.682-.482 0-.237-.009-.868-.014-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.031-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0 1 12 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.378.203 2.398.1 2.651.64.7 1.03 1.595 1.03 2.688 0 3.848-2.338 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.001 10.001 0 0 0 22 12c0-5.523-4.477-10-10-10Z"/></svg>
                </a>
            </div>
        </footer>
    </div>
    
    <style>
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }
    </style>

    <script>
        // --- DATA ---
        const domains = [
            { name: '1. AI/ML', icon: '🤖', url: 'https://arxiv.org/list/cs.AI/new' },
            { name: '2. AI in Drug Discovery', icon: '🧪', url: 'https://scholar.google.com/scholar?q=AI+drug+discovery' },
            { name: '3. Biotechnology', icon: '🧬', url: 'https://scholar.google.com/scholar?q=biotechnology' },
            { name: '4. Data Science', icon: '📊', url: 'https://arxiv.org/list/cs.DB/new' },
            { name: '5. Personalized Med', icon: '💊', url: 'https://scholar.google.com/scholar?q=personalized+medicine' },
            { name: '6. Cybersecurity', icon: '🛡️', url: 'https://arxiv.org/list/cs.CR/new' },
            { name: '7. Climate Mitigation', icon: '🌍', url: 'https://scholar.google.com/scholar?q=climate+change+mitigation' },
            { name: '8. Sustainable Agri', icon: '🌾', url: 'https://scholar.google.com/scholar?q=sustainable+agriculture' },
            { name: '9. Quantum Computing', icon: '🌀', url: 'https://arxiv.org/list/quant-ph/new' },
            { name: '10. Neuro-Diseases', icon: '🧠', url: 'https://scholar.google.com/scholar?q=neurodegenerative+disease' },
            { name: '11. AI Engineering', icon: '⚙️', url: 'https://arxiv.org/list/cs.SE/new' },
            { name: '12. Circular Economy', icon: '♻️', url: 'https://scholar.google.com/scholar?q=circular+economy' },
            { name: '13. Nanotechnology', icon: '🔬', url: 'https://scholar.google.com/scholar?q=nanotechnology' },
            { name: '14. Blockchain', icon: '🔗', url: 'https://scholar.google.com/scholar?q=blockchain' },
            { name: '15. Mental Health', icon: '🧘', url: 'https://scholar.google.com/scholar?q=mental+health+research' },
            { name: '16. Space Exploration', icon: '🚀', url: 'https://arxiv.org/list/astro-ph/new' },
            { name: '17. Advanced Materials', icon: '🧱', url: 'https://scholar.google.com/scholar?q=advanced+materials' },
            { name: '18. Robotics & Automation', icon: '🦾', url: 'https://arxiv.org/list/cs.RO/new' },
            { name: '19. Bioinformatics', icon: '🖥️', url: 'https://scholar.google.com/scholar?q=bioinformatics' },
            { name: '20. Renewable Energy', icon: '🔋', url: 'https://scholar.google.com/scholar?q=renewable+energy+technology' },
            { name: '21. Ecosystem Conserv', icon: '🏞️', url: 'https://scholar.google.com/scholar?q=ecosystem+conservation' },
            { name: '22. Physics', icon: '⚛️', url: 'https://arxiv.org/list/physics/new' },
            { name: '23. Business/Economics', icon: '📈', url: 'https://arxiv.org/list/econ/new' },
            { name: '24. Sociology', icon: '👥', url: 'https://arxiv.org/list/physics.soc-ph/new' }
        ];

        const randomExamples = [
            { url: 'https://example.com/super-battery-press-release', text: `FOR IMMEDIATE RELEASE -- Our revolutionary solid-state battery stores 10x more energy than lithium-ion. The proprietary electrolyte formula, developed in our secret labs, allows for charging in seconds, not hours. This technology is guaranteed to disrupt the entire $50B EV industry. We have achieved a 100% success rate in our internal trials, though the data is confidential for competitive reasons. A clear mechanism for ion transport is still under investigation, but results are undeniable. We project exponential market adoption once production scales.` },
            { url: 'https://example.com/agi-breakthrough-blog', text: `We are thrilled to announce a new AGI system that improves itself exponentially. Our proprietary recursive algorithm has achieved singularity-level intelligence in simulations. This is a game-changing moment for humanity. For safety reasons, the full architecture details are classified. The system's reasoning is beyond human comprehension, representing a true black box. We are seeking venture capital to scale our hardware infrastructure. This is a limited time opportunity for investors.` },
            { url: 'https://example.com/anti-aging-serum-promo', text: `Turn back the clock with our new telomerase activation therapy. Our secret enzyme formula is clinically proven to restore youth and vitality. Users can expect guaranteed results, seeing a visible reduction in age markers within weeks. The complex biological pathways are proprietary, but our before-and-after photos speak for themselves. This exclusive treatment is available for a limited time only. We have not yet published in peer-reviewed journals.` }
        ];

        const analysisRules = [
            { type: 'exploit', keywords: ['proprietary', 'secret', 'confidential', 'classified'], reason: 'Claims of "proprietary" or "secret" methods without explanation can hide a lack of scientific rigor and prevent peer review.' },
            { type: 'exploit', keywords: ['guaranteed', '100% success', 'undeniable'], reason: 'Science rarely offers guarantees; this is marketing language designed to overstate confidence and attract investment.' },
            { type: 'exploit', keywords: ['disrupt', 'game-changing', 'revolutionary'], reason: 'Overuse of hyperbolic buzzwords often indicates a focus on marketing over scientific substance.' },
            { type: 'exploit', keywords: ['limited time', 'exclusive'], reason: 'Creating artificial scarcity is a sales tactic, not a scientific practice.' },
            { type: 'gap', keywords: ['under investigation', 'not yet published', 'beyond human comprehension', 'black box'], reason: 'Acknowledges a lack of fundamental understanding or missing peer review, which is a significant knowledge gap.' },
            { type: 'opportunity', keywords: ['peer-reviewed', 'mechanism', 'pathways'], reason: 'A lack of a clear mechanism or peer-reviewed data presents an opportunity for rigorous, independent research to validate or debunk the claims.' },
            { type: 'opportunity', keywords: ['scaling', 'production'], reason: 'Claims about scaling often ignore significant engineering challenges, creating an opportunity for MVP development focused on manufacturability.' }
        ];

        // --- UI INITIALIZATION ---
        const categoryGrid = document.getElementById('categoryGrid');
        const indicatorsContainer = document.getElementById('carouselIndicators');
        let currentCarouselPage = 0;
        const itemsPerPage = 8;
        const totalPages = Math.ceil(domains.length / itemsPerPage);

        function populateDomains() {
            let gridHtml = '';
            let indicatorsHtml = '';
            for (let i = 0; i < totalPages; i++) {
                gridHtml += '<div class="category-page">';
                const pageDomains = domains.slice(i * itemsPerPage, (i + 1) * itemsPerPage);
                gridHtml += pageDomains.map(d => `
                    <div class="category-btn" onclick="window.open('${d.url}', '_blank')">
                        <span class="category-icon">${d.icon}</span>
                        ${d.name}
                    </div>
                `).join('');
                gridHtml += '</div>';
                indicatorsHtml += `<div class="indicator-dot ${i === 0 ? 'active' : ''}" onclick="goToCarouselPage(${i})" aria-label="Go to page ${i+1} of research domains"></div>`;
            }
            categoryGrid.innerHTML = gridHtml;
            indicatorsContainer.innerHTML = indicatorsHtml;
        }
        
        function updateCarousel() {
            const baseOffset = -currentCarouselPage * 100;
            categoryGrid.style.transform = `translateX(calc(${baseOffset}% + ${-15 * currentCarouselPage}px))`;
            
            const dots = document.querySelectorAll('.indicator-dot');
            dots.forEach((dot, index) => {
                dot.classList.toggle('active', index === currentCarouselPage);
            });
        }

        function navigateCarousel(direction) {
            currentCarouselPage += direction;
            if (currentCarouselPage < 0) currentCarouselPage = totalPages - 1;
            if (currentCarouselPage >= totalPages) currentCarouselPage = 0;
            updateCarousel();
        }

        function goToCarouselPage(pageNumber) {
            currentCarouselPage = pageNumber;
            updateCarousel();
        }
        
        document.addEventListener('DOMContentLoaded', populateDomains);
        
        // --- CORE FUNCTIONS ---
        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = message;
            document.getElementById('toast-container').appendChild(toast);
            setTimeout(() => toast.remove(), 5000);
        }

        function loadRandomExample() {
            const randomIndex = Math.floor(Math.random() * randomExamples.length);
            document.getElementById('urlInput').value = randomExamples[randomIndex].url;
            showToast("🎲 Random example URL loaded!");
        }
        
        function resetApp() {
            document.getElementById('urlInput').value = '';
            ['results', 'blueprintSection', 'sourceTextSection'].forEach(id => document.getElementById(id).style.display = 'none');
            document.getElementById('resetBtn').style.display = 'none';
            showToast("🔄 Application reset.");
        }

        function analyzeCase() {
            const url = document.getElementById('urlInput').value;
            if (!url) {
                showToast("⚠️ Please provide a URL to analyze.");
                return;
            }
            
            let textToAnalyze = randomExamples.find(ex => ex.url === url)?.text || randomExamples[0].text;
            const loadingSection = document.getElementById('loadingSection');
            const loadingText = document.getElementById('loadingText');

            loadingSection.style.display = 'block';
            ['results', 'blueprintSection', 'sourceTextSection'].forEach(id => document.getElementById(id).style.display = 'none');
            document.getElementById('resetBtn').style.display = 'none';

            // Dynamic loading text simulation
            loadingText.textContent = "Processing neural pathways...";
            setTimeout(() => loadingText.textContent = "Scanning for keywords...", 700);
            setTimeout(() => loadingText.textContent = "Generating blueprint...", 1400);

            setTimeout(() => {
                const analysis = performMockAnalysis(textToAnalyze);
                const resultsContainer = document.getElementById('results');
                resultsContainer.innerHTML = `
                    <div class="result-card">
                        <h3 class="card-title"><span class="card-icon">⚠️</span>Exploits & Red Flags</h3>
                        ${analysis.exploits.map(item => `<div class="exploit-item">${item.reason} <span onclick="highlightContext('${item.refId}')" class="context-link">See context</span></div>`).join('') || '<p>No significant exploits detected.</p>'}
                    </div>
                    <div class="result-card">
                        <h3 class="card-title"><span class="card-icon">❓</span>Knowledge Gaps</h3>
                        ${analysis.gaps.map(item => `<div class="exploit-item" style="border-color: #ff9900;">${item.reason} <span onclick="highlightContext('${item.refId}')" class="context-link">See context</span></div>`).join('') || '<p>No significant knowledge gaps detected.</p>'}
                    </div>
                    <div class="result-card">
                        <h3 class="card-title"><span class="card-icon">💡</span>Opportunities</h3>
                        ${analysis.opportunities.map(item => `<div class="opportunity-item">${item.reason} <span onclick="highlightContext('${item.refId}')" class="context-link">See context</span></div>`).join('') || '<p>No clear opportunities detected.</p>'}
                    </div>
                    <div class="result-card">
                        <h3 class="card-title"><span class="card-icon">📈</span>Growth Model</h3>
                        <div class="growth-model">
                            <div class="metric"><span>Virality Potential:</span> <span class="metric-value">${(analysis.exploits.length > 2) ? 'High (Hype-driven)' : 'Moderate'}</span></div>
                            <div class="metric"><span>Scientific Validity Risk:</span> <span class="metric-value">${(analysis.gaps.length > 0) ? 'High' : 'Low'}</span></div>
                            <div class="metric"><span>R&D Opportunity Score:</span> <span class="metric-value">${analysis.opportunities.length * 25}/100</span></div>
                        </div>
                    </div>
                `;
                
                document.getElementById('sourceTextDisplay').innerHTML = analysis.highlightedText;
                generateBlueprint(analysis);
                
                loadingSection.style.display = 'none';
                document.getElementById('sourceTextSection').style.display = 'block';
                resultsContainer.style.display = 'grid';
                document.getElementById('blueprintSection').style.display = 'block';
                document.getElementById('resetBtn').style.display = 'inline-block';

            }, 2000);
        }
        
        function highlightContext(refId) {
            const element = document.getElementById(refId);
            if(element) {
                element.scrollIntoView({ behavior: 'smooth', block: 'center' });
                element.classList.add('highlight-active');
                setTimeout(() => element.classList.remove('highlight-active'), 1500);
            }
        }

        function performMockAnalysis(text) {
            let results = { exploits: [], gaps: [], opportunities: [], highlightedText: text };
            let highlightCounter = 0;
            analysisRules.forEach(rule => {
                rule.keywords.forEach(keyword => {
                    const sentenceRegex = new RegExp(`[^.!?]*\\b${keyword}\\b[^.!?]*[.!?]`, 'gi');
                    let match;
                    while ((match = sentenceRegex.exec(text)) !== null) {
                        const quote = match[0].trim();
                        let resultsKey = rule.type + 's';
                        if (rule.type === 'opportunity') {
                            resultsKey = 'opportunities';
                        }
                        
                        if (results[resultsKey] && !results[resultsKey].some(item => item.quote === quote)) {
                            highlightCounter++;
                            const refId = `ref-${highlightCounter}`;
                            results[resultsKey].push({ reason: rule.reason, quote: quote, refId: refId });
                            results.highlightedText = results.highlightedText.replace(quote, `<span class="highlight" id="${refId}">${quote}</span>`);
                        }
                    }
                });
            });
            return results;
        }

        function generateBlueprint(analysis) {
            const blueprint = `# MVP Blueprint: Scientific Claim Verification Platform
## 1. Problem Statement
Based on the analyzed text, the primary challenge is the lack of verifiable data and peer review for high-impact scientific claims. This creates noise for researchers, investors, and the public. An independent verification platform is needed.
## 2. Core Features
- **Claim Submission:** Users can submit claims. The system will auto-flag keywords like "${analysis.exploits.map(e => e.quote.match(/\b(\w+)\b/g)[1]).slice(0, 2).join(', ')}".
- **Replication Tracker:** Registered labs can submit replication results (success, failure, partial).
- **Gap Analysis Dashboard:** Automatically visualizes knowledge gaps (e.g., "Mechanism unclear," "No peer review").
## 3. Tech Stack
- Frontend: React/Vue, Backend: Python (Flask/Django), DB: PostgreSQL.
## 4. Monetization Strategy
- Tiered API Access for institutional investors, Premium due diligence reports.`;

            document.getElementById('blueprintTitle').textContent = '📋 Generated Blueprint';
            document.getElementById('blueprintContent').textContent = blueprint;
            document.getElementById('whitepaperBtn').disabled = false;
            document.getElementById('whitepaperBtn').textContent = '📄 Generate Whitepaper';
        }

        async function generateWhitepaperWithAI() {
            const blueprintContent = document.getElementById('blueprintContent').textContent;
            const whitepaperBtn = document.getElementById('whitepaperBtn');
            const blueprintContentEl = document.getElementById('blueprintContent');

            if (!blueprintContent.trim().startsWith('# MVP Blueprint')) {
                showToast("⚠️ Please generate a blueprint first.");
                return;
            }

            whitepaperBtn.disabled = true;
            whitepaperBtn.textContent = '🧠 Generating...';
            blueprintContentEl.classList.add('loading-ai');

            const apiKey = "";
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
            const systemPrompt = "You are a professional technology and business analyst. Your task is to expand the following MVP blueprint into a concise, well-structured, and persuasive one-page whitepaper. Use clear headings, bullet points, and a professional tone. Focus on the problem, the proposed solution, market opportunity, and business model.";
            const payload = {
                contents: [{ parts: [{ text: `Expand this blueprint into a whitepaper:\n\n${blueprintContent}` }] }],
                systemInstruction: { parts: [{ text: systemPrompt }] },
            };

            try {
                const response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                if (!response.ok) throw new Error(`API call failed with status: ${response.status}`);
                const result = await response.json();
                const whitepaperText = result.candidates?.[0]?.content?.parts?.[0]?.text;
                if (whitepaperText) {
                    document.getElementById('blueprintTitle').textContent = '📄 Generated Whitepaper';
                    blueprintContentEl.textContent = whitepaperText;
                } else { throw new Error("No content received from API."); }
            } catch (error) {
                console.error("Error generating whitepaper:", error);
                showToast(`❌ Error: ${error.message}`);
                blueprintContentEl.textContent = `Sorry, there was an error generating the whitepaper.\n\n${error.message}`;
            } finally {
                whitepaperBtn.disabled = false;
                whitepaperBtn.textContent = '📄 Regenerate Whitepaper';
                blueprintContentEl.classList.remove('loading-ai');
            }
        }

        function downloadBlueprint() {
            const content = document.getElementById('blueprintContent').textContent;
            const title = document.getElementById('blueprintTitle').textContent.includes('Whitepaper') ? 'Generated_Whitepaper.txt' : 'MVP_Blueprint.md';
            const blob = new Blob([content], { type: 'text/plain' });
            const a = document.createElement('a');
a.href = URL.createObjectURL(blob);
            a.download = title;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }
    </script>
</body>
</html>

